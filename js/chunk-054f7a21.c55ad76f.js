(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-054f7a21"],{"00c6":function(e,t,o){"use strict";o.r(t);var s=o("7a23");const c={class:"app-page"},n={key:0,class:"loading"},l={key:1,class:"loading"},i={key:3},a={class:"btn-block"},r={key:0,class:"main-img-block"},p=["src","alt"],m=["innerHTML"],d={class:"image-list"},b={class:"img-block"},O=["src","alt"],j={class:"link"};function u(e,t,o,u,k,E){const h=Object(s["resolveComponent"])("edit-post");return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",c,[E.loading?(Object(s["openBlock"])(),Object(s["createElementBlock"])("p",n,"Загрузка...")):Object(s["createCommentVNode"])("",!0),E.loading?(Object(s["openBlock"])(),Object(s["createElementBlock"])("p",l,"Удаление...")):Object(s["createCommentVNode"])("",!0),k.isEditFormOpen?(Object(s["openBlock"])(),Object(s["createBlock"])(h,{key:2,postForEdit:E.post,onCloseForm:E.closeEditForm},null,8,["postForEdit","onCloseForm"])):Object(s["createCommentVNode"])("",!0),k.isEditFormOpen?Object(s["createCommentVNode"])("",!0):(Object(s["openBlock"])(),Object(s["createElementBlock"])("main",i,[Object(s["createElementVNode"])("h1",null,Object(s["toDisplayString"])(E.post.title),1),Object(s["createElementVNode"])("div",a,[E.userId?(Object(s["openBlock"])(),Object(s["createElementBlock"])("button",{key:0,class:"btn edit-btn",onClick:t[0]||(t[0]=(...e)=>E.openEditForm&&E.openEditForm(...e))}," Редактировать ")):Object(s["createCommentVNode"])("",!0),E.userId?(Object(s["openBlock"])(),Object(s["createElementBlock"])("button",{key:1,class:"btn delete-btn",onClick:t[1]||(t[1]=(...e)=>E.deletePost&&E.deletePost(...e))}," Удалить ")):Object(s["createCommentVNode"])("",!0)]),E.post.imageList?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",r,[E.post.imageList[0]?(Object(s["openBlock"])(),Object(s["createElementBlock"])("img",{key:0,src:E.post.imageList[0].url,alt:E.post.imageList[0].name},null,8,p)):Object(s["createCommentVNode"])("",!0)])):Object(s["createCommentVNode"])("",!0),Object(s["createElementVNode"])("p",{innerHTML:E.post.text},null,8,m),Object(s["createElementVNode"])("ul",d,[(Object(s["openBlock"])(!0),Object(s["createElementBlock"])(s["Fragment"],null,Object(s["renderList"])(E.post.imageList,e=>(Object(s["openBlock"])(),Object(s["createElementBlock"])("li",{class:"image-item mr-16",key:e.url},[Object(s["createElementVNode"])("div",b,[Object(s["createElementVNode"])("img",{src:e.url,alt:e.name},null,8,O)])]))),128))]),Object(s["createElementVNode"])("p",j,[Object(s["createElementVNode"])("a",{href:"#",onClick:t[2]||(t[2]=Object(s["withModifiers"])(t=>e.$router.go(-1),["prevent"]))}," назад ")])]))])}var k=o("07f7"),E={name:"PostPage",components:{EditPost:k["a"]},data(){return{isEditFormOpen:!1}},computed:{loading(){return this.$store.getters.getProcessing},userId(){return this.$store.getters.userId},post(){return this.$store.getters.post}},methods:{async deletePost(){confirm("Лена, ты правда хочешь удалить этот пост???   (°□°) ")&&(this.post.imageList&&this.post.imageList.forEach(e=>{this.$store.dispatch("deleteImage",e.name)}),await this.$store.dispatch("removePost",this.post.id),this.$router.push({name:"post-list-page"}))},openEditForm(){this.$store.commit("UPDATE_POST_IMAGE_LIST",this.post.imageList||[]),this.isEditFormOpen=!0},closeEditForm(){this.isEditFormOpen=!1}},async mounted(){const e=this.$route.params.id;await this.$store.dispatch("getPost",e)}},h=(o("df9a"),o("6b0d")),g=o.n(h);const y=g()(E,[["render",u],["__scopeId","data-v-7e209bae"]]);t["default"]=y},"07f7":function(e,t,o){"use strict";var s=o("7a23");const c=e=>(Object(s["pushScopeId"])("data-v-e94ba1f4"),e=e(),Object(s["popScopeId"])(),e),n={class:"edit-post"},l={action:"#",class:"form"},i={key:0,class:"loading"},a=c(()=>Object(s["createElementVNode"])("h2",{class:"form-title"},"Редактирование",-1)),r={class:"form-element-list"},p={class:"form-item select-type-input"},m={key:0,class:"select-type-block"},d={class:"form-item select-type-input"},b={key:0,class:"select-type-block"},O={class:"form-item"},j={class:"form-item ckeditor"},u={key:0},k={class:"btn-block"};function E(e,t,o,c,E,h){const g=Object(s["resolveComponent"])("ckeditor"),y=Object(s["resolveComponent"])("select-files-btn"),v=Object(s["resolveComponent"])("images-upload");return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",n,[Object(s["createElementVNode"])("form",l,[h.loading?(Object(s["openBlock"])(),Object(s["createElementBlock"])("p",i,"Обновление поста...")):Object(s["createCommentVNode"])("",!0),a,Object(s["createElementVNode"])("p",null,"postId: "+Object(s["toDisplayString"])(E.post.id),1),Object(s["createElementVNode"])("ul",r,[Object(s["createElementVNode"])("li",p,[Object(s["withDirectives"])(Object(s["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>E.post.postType=e),class:"title",placeholder:"тип поста.. (анонс, отчёт..)",readonly:"",onClick:t[1]||(t[1]=(...e)=>h.openPostTypeBlock&&h.openPostTypeBlock(...e))},null,512),[[s["vModelText"],E.post.postType]]),E.isPostTypeOpen?(Object(s["openBlock"])(),Object(s["createElementBlock"])("ul",m,[Object(s["createElementVNode"])("li",{onClick:t[2]||(t[2]=e=>h.selectPostType("announce"))},"Анонс"),Object(s["createElementVNode"])("li",{onClick:t[3]||(t[3]=e=>h.selectPostType("post"))},"Отчёт")])):Object(s["createCommentVNode"])("",!0)]),Object(s["createElementVNode"])("li",d,[Object(s["withDirectives"])(Object(s["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>E.post.eventType=e),class:"title",placeholder:"тип события.. (экскурсия, поход, фотосессия..)",readonly:"",onClick:t[5]||(t[5]=(...e)=>h.openEventTypeBlock&&h.openEventTypeBlock(...e))},null,512),[[s["vModelText"],E.post.eventType]]),E.isEventTypeOpen?(Object(s["openBlock"])(),Object(s["createElementBlock"])("ul",b,[Object(s["createElementVNode"])("li",{onClick:t[6]||(t[6]=e=>h.selectEventType("tracking"))},"Поход"),Object(s["createElementVNode"])("li",{onClick:t[7]||(t[7]=e=>h.selectEventType("excursion"))},"Экскурсия"),Object(s["createElementVNode"])("li",{onClick:t[8]||(t[8]=e=>h.selectEventType("photosession"))},"Фотосессия"),Object(s["createElementVNode"])("li",{onClick:t[9]||(t[9]=e=>h.selectEventType("ural"))},"Поездка Урал"),Object(s["createElementVNode"])("li",{onClick:t[10]||(t[10]=e=>h.selectEventType("crimea"))},"Поездка в Крым")])):Object(s["createCommentVNode"])("",!0)]),Object(s["createElementVNode"])("li",O,[Object(s["withDirectives"])(Object(s["createElementVNode"])("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>E.post.title=e),type:"text",placeholder:"заголовок"},null,512),[[s["vModelText"],E.post.title]])]),Object(s["createElementVNode"])("li",j,[Object(s["createVNode"])(g,{modelValue:E.post.text,"onUpdate:modelValue":t[12]||(t[12]=e=>E.post.text=e),editor:E.editor,config:E.editorConfig,class:"ckeditor"},null,8,["modelValue","editor","config"])])])]),Object(s["createVNode"])(y,{onOnReadFiles:e.readFiles},null,8,["onOnReadFiles"]),Object(s["createVNode"])(v,{previewList:e.previewList,class:"image-block"},null,8,["previewList"]),h.getProcessing?(Object(s["openBlock"])(),Object(s["createElementBlock"])("h1",u,"Loading...")):Object(s["createCommentVNode"])("",!0),Object(s["createElementVNode"])("div",k,[Object(s["createElementVNode"])("button",{class:"btn mr-16",onClick:t[13]||(t[13]=(...e)=>h.closeFormHandler&&h.closeFormHandler(...e))},"Закрыть"),Object(s["createElementVNode"])("button",{class:"btn btn-submit",type:"submit",onClick:t[14]||(t[14]=Object(s["withModifiers"])((...e)=>h.updatePost&&h.updatePost(...e),["prevent"]))},"Обновить")])])}var h=o("fb3d"),g=o.n(h),y=o("7426"),v=o("473d"),T=o("70b3"),V={name:"EditPost",components:{SelectFilesBtn:y["a"],ImagesUpload:v["a"]},props:["postForEdit"],mixins:[T["a"]],data(){return{isPostTypeOpen:!1,isEventTypeOpen:!1,uploading:!1,post:this.postForEdit,editor:g.a,editorData:"",editorConfig:{}}},computed:{loading(){return this.$store.getters.getProcessing},getProcessing(){return this.$store.getters.getProcessing},postImageList(){return this.$store.getters.postImageList}},methods:{selectPostType(e){this.post.postType="announce"===e?"Aнонс":"Отчёт",this.isPostTypeOpen=!1},selectEventType(e){switch(e){case"tracking":this.post.eventType="Поход";break;case"excursion":this.post.eventType="Экскурсия";break;case"photosession":this.post.eventType="Фотосессия";break;case"ural":this.post.eventType="Поездка Урал";break;case"crimea":this.post.eventType="Поездка в Крым";break;default:alert("")}this.isEventTypeOpen=!1},openPostTypeBlock(){this.isPostTypeOpen=!this.isPostTypeOpen,this.isEventTypeOpen=!1},openEventTypeBlock(){this.isEventTypeOpen=!this.isEventTypeOpen,this.isPostTypeOpen=!1},closeFormHandler(){this.$store.commit("UPDATE_POST_IMAGE_LIST",[]),this.$emit("closeForm")},async updatePost(){this.post.imageList=this.postImageList,""!==this.post.title&&""!==this.post.text?(this.$store.commit("SET_PROCESSING",!0),await this.$store.dispatch("updatePost",this.post),this.$store.commit("SET_PROCESSING",!1),this.$emit("closeForm")):alert("заполните поля!")}},mounted(){console.log(this.postForEdit)}},N=(o("11cf"),o("6b0d")),f=o.n(N);const B=f()(V,[["render",E],["__scopeId","data-v-e94ba1f4"]]);t["a"]=B},"11cf":function(e,t,o){"use strict";o("918a")},"25f0":function(e,t,o){},"918a":function(e,t,o){},df9a:function(e,t,o){"use strict";o("25f0")}}]);
//# sourceMappingURL=chunk-054f7a21.c55ad76f.js.map